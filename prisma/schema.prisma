// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model AdminUser {
  id       Int    @id @default(autoincrement())
  email    String @unique
  name     String
  username String
}

model NewsArticle {
  id    Int    @id @default(autoincrement())
  title String
  text  String
}

model Contest {
  id    Int           @id @default(autoincrement())
  year  Int
  from  DateTime
  to    DateTime
  tasks ContestTask[]
  submissions  ContestSubmission[]
  teams Team[]
}
 
model ContestTask {
  id         Int     @id @default(autoincrement())
  identifier String
  contest    Contest @relation(fields: [contestId], references: [id])
  contestId  Int
}

model Team {
  id          Int          @id @default(autoincrement())
  name        String
  contestants Contestant[]
  submissions ContestSubmission[]
  contests Contest[]
}

model ContestSubmission {
  id Int @id @default(autoincrement())
  submissionTime Int

  team Team @relation(fields: [teamId], references: [id])
  contest Contest @relation(fields: [contestId], references: [id])
  teamId Int
  contestId Int
}

model Contestant {
  id     Int  @id @default(autoincrement())
  team   Team @relation(fields: [teamId], references: [id])
  teamId Int
}
